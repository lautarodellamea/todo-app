import { useContext } from "react";
import { CrudForm, CrudTasks, CountTasks } from ".";
import CrudContext from "../context/CrudContext";
import ConfettiExplosion from "react-confetti-explosion";

export const ToDoApp = () => {
  const { db, pendingTodosCount } = useContext(CrudContext);

  return (
    <div className="max-w-xl m-auto">
      {!pendingTodosCount && <ConfettiExplosion />}
      <nav className="flex justify-between items-center p-4">
        <h1 className="text-4xl font-semibold">
          <span className="text-amber-500">Todo</span> App
        </h1>

        <div>
          <svg
            className="w-16"
            width="123"
            height="74"
            viewBox="0 0 123 74"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              x="16.5961"
              width="86.8841"
              height="54.1621"
              rx="10"
              fill="#F5A524"
            />
            <path
              d="M122.435 21.5629L113.533 20.2649C113.533 20.2649 104.729 13.25 100.379 21.7813C99.5789 23.3492 99.512 26.9613 99.512 26.9613C100.084 27.6073 102.582 54.1048 50.6521 47.4964C42.1311 46.4106 26.3515 40.7848 17.0486 47.554C12.3333 40.8151 11.3263 31.101 11.3263 31.101C9.18161 38.7771 12.6375 46.5714 14.4749 49.9469C13.7722 50.79 13.109 51.712 12.534 52.7947C11.9621 53.8713 11.1833 55.4939 10.8883 58.5176C10.8883 58.5176 5.18423 57.1134 5.37589 62.2995C5.37589 62.2995 5.64682 67.9555 6.34955 70.87C-2.0003 70.87 0.210025 71.5841 0.414679 72.0942C0.851928 73.1839 24.3163 74 55.8177 74C87.3191 74 112.858 73.0507 112.858 71.877C111.54 70.5002 118.703 70.972 99.223 70.5002C98.8549 69.933 98.2738 69.3446 97.2791 68.7896C97.2791 68.7896 93.4125 64.1525 96.8927 63.8189C96.8927 63.8189 98.7302 64.0342 100.376 61.4381C100.376 61.4381 101.927 60.4676 102.706 61.7626C102.706 61.7626 102.612 63.3882 101.155 63.8189C101.155 63.8189 100.09 66.9548 102.895 69.005C102.895 69.005 105.894 68.0314 106.381 62.5208C106.381 62.5208 107.446 58.4084 103.664 57.2225C103.521 57.171 103.461 57.1589 103.339 57.1194C103.841 56.1307 107.781 48.1545 107.06 41.8796C107.06 41.8796 112.861 44.2604 111.218 37.2394C111.218 37.2394 108.021 31.5074 111.124 29.891C111.124 29.891 117.126 31.0798 120.694 26.3214C120.697 26.3153 124.375 22.4181 122.435 21.5629ZM9.83871 68.6714C9.83871 68.6714 8.28722 63.1668 10.4198 63.8068C10.4198 63.8068 13.4132 64.8834 15.059 64.5619C15.059 64.5619 15.6553 67.898 17.4167 70.297C15.3146 70.3667 13.322 70.4516 11.5271 70.5274C11.2868 69.9209 10.797 69.2537 9.83871 68.6714ZM55.8268 69.745C44.7169 69.745 34.3797 69.8663 25.6062 70.0665C25.4814 69.4356 25.0646 68.82 24.0546 68.456C24.0546 68.456 20.3767 67.9132 19.9964 66.0814C19.9964 66.0814 26.0868 62.9454 27.9273 59.3819C27.9273 59.3819 30.6713 58.4144 44.7534 62.4056C55.9485 65.5749 71.7494 66.1905 90.9027 64.6741C90.9027 64.6741 90.848 67.6857 92.9105 70.2575C82.9414 69.9361 70.0032 69.745 55.8268 69.745Z"
              fill="white"
            />
            <path
              d="M22.0539 13.7251C22.4835 13.297 23.1799 13.297 23.6094 13.7251L33.8747 23.957C34.3042 24.3851 34.3042 25.0791 33.8747 25.5073L23.6094 35.7391C23.1799 36.1672 22.4835 36.1672 22.0539 35.7391C21.6244 35.311 21.6244 34.617 22.0539 34.1888L31.5416 24.7321L22.0539 15.2755C21.6244 14.8474 21.6244 14.1532 22.0539 13.7251Z"
              fill="white"
            />
            <path
              d="M30.8973 35.8188C30.8973 35.2133 31.3897 34.7225 31.9971 34.7225H47.0285C47.6359 34.7225 48.1284 35.2133 48.1284 35.8188C48.1284 36.4242 47.6359 36.915 47.0285 36.915H31.9971C31.3897 36.915 30.8973 36.4242 30.8973 35.8188Z"
              fill="white"
            />
          </svg>
        </div>
      </nav>

      <CountTasks />

      <CrudForm />

      {db && <CrudTasks />}
    </div>
  );
};
